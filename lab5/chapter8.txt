create database publications;
use publications;

-- create user
GRANT ALL ON publications.* TO ëmeí@ílocalhostí
	IDENTIFIED BY ë1234í;

-- Create table and columns
create table classics (
	author varchar(128),
	title varchar(128),
	type varchar(16),
	year char(4)
)
Engine MyISAM;

-- Alter Table
ALTER TABLE classics ADD id INT UNISGNED NOT NULL AUTO_INCREMENT key;

-- Adding data to table
INSERT INTO classics(author, title, type, year)
VALUES('Mark Twain','The Adventures of Tom Sawyer','Fiction','1876');
INSERT INTO classics(author, title, type, year)
VALUES('Jane Austen','Pride and Prejudice','Fiction','1811');
INSERT INTO classics(author, title, type, year)
VALUES('Charles Darwin','The Origin of Species','Non-Fiction','1856');
INSERT INTO classics(author, title, type, year)
VALUES('Charles Dickens','The Old Curiosity Shop','Fiction','1841');
INSERT INTO classics(author, title, type, year)
VALUES('William Shakespeare','Romeo and Juliet','Play','1594');

-- rename table
alter table classics rename pre1900;
alter table pre1900 rename classics;

-- change column data type
alter table classics modify year smallint;

-- add new column
alter table classics add pages smallint unsigned;

-- rename column
alter table classics change type category varchar(16);

-- remove column
alter table classics drop pages;

-- remove a table
create table disposable(trash int);
describe disposable;
drop table disposable;


-- Adding INDEXES to table
ALTER TABLE classics ADD INDEX(author(20))
ALTER TABLE classics ADD INDEX(title(20))

-- Primary Key 
ALTER TABLE classics ADD isbn CHAR(13);
UPDATE classics SET isbn='9781598184891' WHERE year='1876';
UPDATE classics SET isbn='9780582506206' WHERE year='1811';
UPDATE classics SET isbn='9780517123201' WHERE year='1856';
UPDATE classics SET isbn='9780099533474' WHERE year='1841';
UPDATE classics SET isbn='9780192814968' WHERE year='1594';
ALTER TABLE classics ADD PRIMARY KEY(isbn);

-- SELECT query
SELECT author, title
FROM classics; 

-- Select count
SELECT COUNT(*)
FROM classics;

-- Select Distinct
INSERT INTO classics(author, title, category, year, isbn)
VALUES('Charles Dickens','Little Dorrit','Fiction','1857', '9780141439969');
SELECT DISTINCT author
FROM classics;

-- Where clause
SELECT author,title 
FROM classics 
WHERE author="Mark Twain";

-- Delete 
DELETE FROM classics 
WHERE title="Little Dorrit";

-- Update and Set
UPDATE classics SET author="Mark Twain (Samuel Langhorne Clemens"
WHERE author="Mark Twain";

-- Order by
SELECT author, title
FROM classics
ORDER BY author;

-- Group By
SELECT category, COUNT(author)
FROM classics
GROUP BY category;

-- Join using where clause
SELECT name, author, title
FROM customers, classics
WHERE customers.isbn=classics.isbn;

-- Natural Join
SELECT name, author, title 
FROM customers, NATURAL JOIN classics

-- Join on
SELECT name, author, title
FROM customers
JOIN classics ON customers.isbn=classics.isbn;

--  Using AS (Alias)
SLECT name, author, title
FROM cutomers AS cust, classics AS class
WHERE cust.isbn=class.isbn;

-- JOINS
CREATE TABLE customers (
      name VARCHAR(128),
      isbn VARCHAR(13),
      PRIMARY KEY (isbn)) ENGINE MyISAM;
	  	  
INSERT INTO customers(name,isbn)
VALUES('Joe Bloggs','9780099533474');
INSERT INTO customers(name,isbn)
VALUES('Mary Smith','9780582506206');
INSERT INTO customers(name,isbn)
VALUES('Jack Wilson','9780517123201');

-- JOIN using where clause
select name, author, title
from customers, classics
where customers.isbn = classics.isbn;

-- Natural JOIN
select name, author, title
from customers natural join classics;

-- JOIN..ON
select name, author, title
from customers join classics
on customers.isbn = classics.isbn;

--  Using AS
SELECT name, author, title
FROM customers AS cust, classics AS class
WHERE cust.isbn = class.isbn;

